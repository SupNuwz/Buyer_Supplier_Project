<form [formGroup]="userForm" validate>

<h2 mat-dialog-title>{{heading}}</h2>
<mat-dialog-content class="mat-typography">
<mat-tab-group> 
<mat-tab label="User ">

<div class="example-container">
<br/>

<h2 mat-dialog-title>Enter User Details</h2>

<mat-form-field class="example-full-width">
<mat-select placeholder="User Type"  [(ngModel)]="user.userType"  formControlName="userType"   name="userType" id="user-list-user-type" required [disabled]="disabledUserType">
<mat-option *ngFor="let type of userTypes" [value]="type">{{ type }}</mat-option>
</mat-select>  
<mat-error *ngFor="let validation of validationMessages.userType">
    <mat-error class="error-message" *ngIf="userForm.get('userType').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>
            
<mat-form-field class="example-full-width">
<input matInput placeholder="Name" maxlength="20" formControlName="name"  [(ngModel)]="user.name" name="name" id="user-list-name" required  >
<mat-error *ngFor="let validation of validationMessages.name">
    <mat-error class="error-message" *ngIf="userForm.get('name').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>
             
<mat-form-field class="example-full-width">
<input matInput placeholder="Address" maxlength="40" formControlName="address" [(ngModel)]="user.address" name="address" id="user-list-address" required >
<mat-error *ngFor="let validation of validationMessages.address">
    <mat-error class="error-message" *ngIf="userForm.get('address').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>
            
<mat-form-field class="example-full-width">
<input matInput placeholder="Contact No"  type="number" formControlName="contactNo" [(ngModel)]="user.contactNo"  name="contactNo" id="user-list-contact" required >
<mat-error *ngFor="let validation of validationMessages.contactNo">
    <mat-error class="error-message" *ngIf="userForm.get('contactNo').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>
            
<mat-form-field class="example-full-width">
<input matInput placeholder="Email" maxlength="320" formControlName="email" [(ngModel)]="user.email" name="email" id="user-list-email">
<mat-error *ngFor="let validation of validationMessages.email">
    <mat-error class="error-message" *ngIf="userForm.get('email').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>
            
<mat-form-field class="example-full-width" *ngIf="userForm.value.userType==='Buyer'">
<mat-select placeholder="Supplier Base" formControlName="supplierbase" [(ngModel)]="user.defaultSupplierBaseId" name="supplierBase" id="user-list-supplier-base1" required>
<mat-option *ngFor="let supplierBase of supplierBaseList" [value]="supplierBase.supplierBaseId">{{ supplierBase.supplierBaseName }}</mat-option>
</mat-select>  
<mat-error *ngFor="let validation of validationMessages.supplierbase">
<mat-error class="error-message" *ngIf="userForm.get('supplierbase').hasError(validation.type)">
{{validation.message}}
  </mat-error>
  </mat-error>
  </mat-form-field>   

  <mat-form-field class="example-full-width" *ngIf="userForm.value.userType==='Buyer'">
    <mat-select placeholder="Relevant Zone" formControlName="relevantZone" [(ngModel)]="user.relevantZoneId" name="relevantZone" id="user-list-relevent-zone" required>
    <mat-option *ngFor="let zone of zoneList" [value]="zone.id">{{ zone.name }}</mat-option>
    </mat-select>  
    <mat-error *ngFor="let validation of validationMessages.relevantZone">
    <mat-error class="error-message" *ngIf="userForm.get('relevantZone').hasError(validation.type)">
    {{validation.message}}
      </mat-error>
      </mat-error>
      </mat-form-field>   

<mat-form-field class="example-full-width"  *ngIf="userForm.value.userType=== 'Supplier'">
<mat-select placeholder="Supplier Base" formControlName="supplierbase" [(ngModel)]="user.defaultSupplierBaseId" name="supplierBase" id="user-list-supplier-base2" required >
<mat-option *ngFor="let supplierBase of supplierBaseList" [value]="supplierBase.supplierBaseId">{{ supplierBase.supplierBaseName }}</mat-option>
</mat-select> 
<mat-error  *ngFor="let validation of validationMessages.supplierbase">
    <mat-error class="error-message" *ngIf="userForm.get('supplierbase').hasError(validation.type)">
    {{validation.message}}
  
  </mat-error> 
    </mat-error>
</mat-form-field>   

<mat-form-field class="example-full-width" *ngIf="userForm.value.userType==='Supplier'">
<mat-select placeholder="Delivery Slot Configuration" formControlName="deliverySlot" [(ngModel)]="user.deliverySlotId" name="deliverySlot" id="user-list-delivery-slot" required >
<mat-option *ngFor="let deliverySlot of deliverySlotList" [value]="deliverySlot.id">{{ deliverySlot.slotName }}</mat-option>
</mat-select>  
<mat-error *ngFor="let validation of validationMessages.deliverySlot">
    <mat-error class="error-message" *ngIf="userForm.get('deliverySlot').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>   
                   
            
<mat-form-field class="example-full-width" *ngIf="userForm.value.userType==='Supplier'">
<mat-select placeholder="Category" formControlName="category" [(ngModel)]="user.category"  name="category" id="user-list-category" required >
<mat-option *ngFor="let category of categories" [value]="category">{{ category }}</mat-option>
</mat-select>  
<mat-error *ngFor="let validation of validationMessages.category">
    <mat-error class="error-message" *ngIf="userForm.get('category').hasError(validation.type)">
    {{validation.message}}
    </mat-error>
    </mat-error>
</mat-form-field>  

</div>
</mat-tab>

<mat-tab label="Location">
<div class="example-container" style="height: 500px">
<br/>
<h2 mat-dialog-title>Select User Location</h2>

</div>
</mat-tab>

<mat-tab label="Items" *ngIf="userForm.value.userType==='Supplier'">
<br/>
<h2 mat-dialog-title>Select Supplier Default Inventory Items</h2>

<div>
<table mat-table  matSortDirection="asc"  [dataSource]="standardInventoryList" matSort class="full-width-table" matSort aria-label="Elements">
  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef>
      <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
      </mat-checkbox>
    </th>
    <td mat-cell *matCellDef="let row">
      <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)">
      </mat-checkbox>
    </td>
  </ng-container>

<ng-container matColumnDef="inventoryItemName">
  <th mat-header-cell *matHeaderCellDef mat-sort-header> Item Name </th>
 <td mat-cell *matCellDef="let element"> {{element.inventoryItemName}} </td>
</ng-container>

<ng-container matColumnDef="group">
<th mat-header-cell *matHeaderCellDef mat-sort-header> Group </th>
<td mat-cell *matCellDef="let element"> {{element.group}} </td>
</ng-container>

<tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
<tr mat-row *matRowDef="let row; columns: displayedColumns;">  </tr>
</table>

<mat-paginator 
[pageSizeOptions]="[5, 10, 15, 20]">
</mat-paginator>

</div>
</mat-tab>

</mat-tab-group>
</mat-dialog-content>
 
<mat-dialog-actions align="end">
<button mat-raised-button [mat-dialog-close]="true" color="primary" id="user-list-btn-cancel">Cancel</button>
<button mat-raised-button cdkFocusInitial  (click)="save()" color="primary" [disabled]="!userForm.valid" id="user-list-btn-save">Save</button>
</mat-dialog-actions> 
</form>